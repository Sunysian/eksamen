<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Document</title>
</head>
<body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        import { getFirestore, addDoc, collection, setDoc, doc, updateDoc, deleteField, deleteDoc, getDoc, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-firestore.js";
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAUeax6bP2gqKBpm6TPzItsE7uqiSmyppA",
          authDomain: "visualnovel-10c31.firebaseapp.com",
          projectId: "visualnovel-10c31",
          storageBucket: "visualnovel-10c31.appspot.com",
          messagingSenderId: "136144648044",
          appId: "1:136144648044:web:d8424ca1355d0470e56549",
          measurementId: "G-9WLD9KF8WN"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore();

        await setDoc(
            doc(db, "elever", "nilja"), {
                fornavn: "Jakob",
                etternavn: "Nilsen",
                epost: "jakob@nilsen.net"
        });
        await updateDoc(
            doc(db, "elever", "nilja"), {
                etternavn: "Nilssen",
                telefon: "2233445"
        });
        await updateDoc(
            doc(db, "elever", "nilja"), {
                epost: deleteField()
        });
        await deleteDoc(
            doc(db, "elever", "nilja")
        );
        await setDoc(
            doc(db, "elever", "thore"), {
                fornavn: "Rebecca",
                etternavn: "Thomasen",
                telefon: "12345678"
        });
        await setDoc(
            doc(db, "elever", "nilja"), {
                fornavn: "Jakob",
                etternavn: "Nilsen",
                epost: "jakob@nilsen.net"
        });
        await setDoc(
            doc(db, "elever", "moisa"), {
                fornavn: "Isa",
                etternavn: "Mo",
                epost: "isamo@mo.no",
                telefon: "23456789"
        });
        await setDoc(
            doc(db, "elever", "marga"), {
                fornavn: "Gabrielle",
                etternavn: "Martin",
                telefon: "45678901"
        });
        const docSnap = await getDoc(
            doc(db, "elever", "nilja")
        );
        console.log(
        "Document data:", 
        docSnap.data()
        );
        console.log(
        "ID:", 
        docSnap.id,
        "Navn:", 
        docSnap.data().fornavn, 
        docSnap.data().etternavn
        );
        const snapshot = await getDocs(
            collection(db, "elever")
        );

        snapshot.forEach((docSnap) => {
        console.log(
            docSnap.data().fornavn, 
            docSnap.data().etternavn
        );
        });
        query(
            collection(db, "elever"), 
            orderBy("etternavn")
        );
        query(
            collection(db, "elever"), 
            where("epost", "!=", "undefined")
        );
        const querySnapshot = await getDocs(
        query(
            collection(db, "elever"), 
            where("epost", "!=", "undefined")
        )
        );

        // Går gjennom alle dokumenter returnert av spørringen
        querySnapshot.forEach((docSnap) => {
        // Skriver ut data fra hvert av dokumentene til konsollen
        console.log(
            docSnap.data().fornavn, 
            docSnap.data().etternavn, 
            docSnap.data().epost
        );
        });
      </script>
</body>
</html>